import { createClient } from '@supabase/supabase-js';
import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

const SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;
const SUPABASE_KEY =
  process.env.SUPABASE_SERVICE_ROLE_KEY ||
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error('Missing env vars');
  process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

const descriptions: Record<string, string> = {
  'ガンナガン W SHOUT':
    '2人の機銃を操る銃撃戦カードゲーム『ガンナガン』の独立稼働型の拡張セット。新たな機銃と銃士が加わり、これ単体でも遊べるほか基本セットとの組み合わせで構築の幅が広がる。相手のライフを削り切るハイスピードバトルが魅力。',
  ガムトーク2:
    '箱の中のお題カードを引き、書かれたテーマについて「良い話」をするだけのシンプルなコミュニケーションゲーム。勝ち負けはなく、最後に全員で「良い話や」と相槌を打って終わる。初対面のアイスブレイクや雑談のきっかけ作りにぴったり。',
  レリトリ:
    '仲間と協力してボスを倒しながらも、最終的な一撃は自分が与えることを目指す協力型トリックテイキング。プレイヤーは装備を巡ってトリックテイキングで争い時に仲間をアシストする。栄光を手にするか全滅するかのギリギリの駆け引きがシビア。',
  'Pendulum Dolls 最終章 Twilinght Teatime':
    '美麗なイラストとともに展開されるデッキ構築型カードゲーム『Pendulum Dolls』シリーズの最終章。',
  ワードッチ:
    '言葉の定義やニュアンスのズレを楽しむパーティゲーム。特定のお題に対し、各プレイヤーがどれくらい自分に当てはまるかを数値化して提示し、その感覚の違いを笑い合うコミュニケーションツールとして楽しめる。',
  シンクロナイズドえかきうた:
    '1人がお題からオリジナルの「絵描き歌」を作りながら即興で歌い、全員が一斉に絵を描くお絵描きゲーム。出来上がった絵の解釈の違いや、誰が一番カオスな絵を描いたかを見比べる時間が最高に盛り上がる。',
  'その案件、弊社なら1金で受けれますが？':
    'IT業界の下請け構造をブラックジョーク満載でカードゲーム化。他社を出し抜いて案件を安値で横取りしつつ、いかに自分の利益を上げるか（中抜きするか）を競う。生々しいチキンレースの駆け引きが笑える大人向けゲーム。',
  推しの尊さを語る君と知ったかぶりの私へ:
    '1人だけテーマを知らない「知ったかぶり」のプレイヤーを見つける正体隠匿系推し語りゲーム。絶妙な質問を交わしながら探り合う心理戦と、推しへの愛をひたすら語る熱量のギャップが楽しい。',
  ポケモンババ抜き:
    'ポケットモンスターをテーマにしたババ抜き。手札を引く際に特殊な効果を発動するカードが追加されており、単なる運任せのババ抜きではなく少しの戦略やハプニングが起こる面白さが加わっている。',
  'LINUX コマンドビルダー':
    'Linuxのコマンドを組み合わせてお題をクリアしていく学習型カードゲーム。遊びながら自然とLinuxコマンドの構造やオプションの使い方が身につくため、エンジニア同士や学習初心者でもワイワイ遊べる。',
  ハリハリダッシュ: 'ハリネズミたちによるアナログのレースゲーム。',
  偏見メーカー:
    'お題に対して「この人はこんなことしそう」という偏見や勝手なイメージをぶつけ合うパーティーゲーム。参加者同士のイメージのズレや、意外すぎる共通認識が明らかになることで会話が爆発的に盛り上がる。',
  '名刺の整理ができません！':
    '増え続ける名刺から特定の条件を満たすものを素早く見つけ出し、相手より早く整理していくスピード系のパズルアクションゲーム。',
  'そういうお前はどうなんだ？ 異世界転生編':
    '何らかのトラブルに対し、無茶な言い訳をでっち上げて他人に責任を押し付ける会話型推理ゲームの異世界ファンタジー版。「魔王からの撤退」などファンタジーならではの失敗について大喜利感覚で責任をなすりつけ合う。',
  焚書欠算:
    '本を燃やして宗教や学問を弾圧する世界を舞台にした、推理と投資の２５〜４０分級の中量級ボードゲーム。プレイヤーは知識の価値を見極めながら立ち回る重厚なテーマとシステムが特徴。',
  恍惚の豚:
    '高級SMクラブを舞台にした4人用のマーダーミステリー。容疑者は女王様と豚（客）という異色の設定のなか、プレイヤー同士で会話しながら怪死したターゲットの事件の真相を解き明かす。',
  'MSSP Project 狩歌':
    '音楽に合わせて歌詞のカードを取るアクションカルタ『狩歌』の、動画クリエイター「M.S.S Project」コラボ版。実際に彼らの楽曲を流し、歌詞のフレーズのカードをいち早く見つけて叩く。',
  'ito classic':
    '価値観のズレを楽しむ協力型パーティーゲーム『ito』のクラシック版。引いた数字の大きさを「お題に沿った言葉」で表現し、全員で小さい順に出していく。伝わりそうで伝わらないもどかしさと価値観の共有が面白い。',
  'ガンナガン OVERHEAT':
    '2人用高速対戦カードゲーム『ガンナガン』の拡張セット。新たな機銃とキャラクターが追加され、既存のセットと組み合わせることでさらに多彩な戦術と強力なコンボが楽しめる。',
  エレガン2:
    'おバカなマナー違反を指摘し合う「お上品」なパーティーゲーム。カードを引く際のマナー違反を見つけて「お下品！」と叫んでは新たな理不尽マナーを追加していく。遊ぶうちに全員の所作がおかしくなっていく過程が笑える。',
  ぽらにめあん:
    '単語の最初と最後の文字を残し、途中の文字を入れ替えた状態から元の単語をいち早く当てる「タイポグリセミア」現象を使った推理スピードゲーム。脳の錯覚を利用したお題に素早く気づけたときの爽快感が魅力。',
  'BLEACH 巻頭歌 骨牌':
    '人気漫画『BLEACH』のコミックス巻頭に記されたポエム（巻頭歌）を用いたカルタ。上の句を読み上げ、対応するキャラクターが描かれた表紙パッケージ（下の句）を取る。ファンの知識と反射神経が試される。',
  教祖爆誕:
    '新興宗教の教祖となり、信者を集めてお布施を巻き上げるブラックなテーマのカードゲーム。いかに胡散臭い教義を作り、他教団を出し抜いて信者を獲得していくかのゲスな攻防が盛り上がる。',
  怪獣弁当:
    '限られた弁当箱のスペースに、いかに美しく高得点になるようにおかず（怪獣の肉など）を配置するかを競うパズルゲーム。',
  コーヒーラッシュ:
    'カフェのバリスタとなり、次々と来る注文をこなしていくパズル系ボードゲーム。材料をボード上で拾い集め、制限時間内に美味しいコーヒーを完成させるドタバタアクションが楽しい。',
  愛してるよゲーム:
    '「愛してるよ」と言い合って照れたら負け、という定番の遊びをカードゲーム化。様々なシチュエーションや特殊なセリフカードを使い、相手をいかに照れさせるか、または耐え抜けるかを競う。',
  そこまで絞るには眠れない夜もあっただろ:
    'ボディビルの大会をテーマにした大喜利パーティーゲーム。ポージングするマッチョのカードに対し、手札の単語カードを組み合わせて最高にキレのある掛け声（応援）を作り上げる。',
  キウィズの王様:
    '出題されるクイズに「わざと間違え続ける」チキンレースゲーム。9つの選択肢から唯一の「正解」を避け、間違った選択肢だけを選び続けるスリルと、推理が外れて正解を引いてしまった時のドボン感が笑える。',
  海底サメ遺跡:
    'サメの潜む海底遺跡からいかにお宝を持ち帰れるかを競うチキンレース。これ以上奥に進んで高得点を狙うか、安全に手前で引き返すかのギリギリの判断と駆け引きが勝敗を分ける。',
  'MSSP Project 狩歌 拡張セット':
    'MSSP版『狩歌』の拡張パック。新たな楽曲や特殊ルールに対応し、よりカオスになったカルタ取りが楽しめるファン向けアイテム。',
  'INFORMER ReturnS':
    '自分のミッションをこなしつつライバルのミスを「密告」して得点を稼ぐパーティーゲーム。「笑ってはいけない」などの制約を守りながら、他人の隙を突くワイワイとしたトークが盛り上がる。',
  'CLANK! イン・スペース':
    'デッキ構築にボード上の移動を組み合わせた名作チキンレース『クランク！』のSF版。邪悪な支配者の宇宙船に忍び込み、音を立てないようにお宝を盗み出し、無事に脱出することを目指す。',
  'コーヒーラッシュ ご一緒にケーキも':
    'バリスタ体験ゲーム『コーヒーラッシュ』の拡張セット。コーヒーだけでなくケーキの注文も処理しなければならなくなり、さらに忙しくもやりがいのあるパズルアクションが楽しめる。',
  'SKY TEAM 乱気流':
    '2人で無言連携して飛行機を着陸させる協力ゲーム『スカイチーム』の拡張セット。新たな天候条件や乱気流のアクシデントが追加され、難易度とスリルが大幅に向上。',
  'WONDERLANDS WAR':
    '不思議の国のアリスの世界を舞台にした、バッグ構築と陣取りを掛け合わせた戦略ゲーム。袋から引くチップによって戦闘や特殊効果が発生し、運と戦術のバランスが熱い。',
  街コロレガシー:
    'サイコロを振って自分の街を育てる名作『街コロ』に、遊ぶたびにルールやコンポーネントが変化していくレガシー要素を加えた作品。全10回のキャンペーンを通じて自分だけの街の歴史を紡ぐ。',
  ちいかわ人生ゲーム:
    '人気キャラクター『ちいかわ』の世界観を楽しめる人生ゲーム。ちいかわたちと共に働き、草むしり検定を受けながら、ほのぼの（時々ハード）なルーレット人生を体験する。',
  カタカナーシ:
    'カタカナ語を使わずに自分のお題の言葉を他の人に伝えるパーティーゲーム。つい外来語を口にしてしまうもどかしさと、思いもよらない表現の工夫が飛び出す面白さが魅力。',
  出禁: '「出禁になる行動」をテーマにしたコミュニケーションゲーム。自分がマスターになったり客になったりしながら、飲食店などで出禁になる行動とならない行動をみんなでジャッジして偏見を見つけ出す。',
  クソレビュージャングル:
    '架空の商品に対する「クソレビュー」のワードを組み合わせ、いかに面白くカオスなレビュー文を作り上げるかを競う大喜利カードゲーム。',
  '呪術廻戦 呪霊逃走 -渋谷事変-':
    '人気アニメ『呪術廻戦』の「渋谷事変」を舞台にした非対称型のボードゲーム。特級呪霊らと呪術師に分かれ、盤面で追走劇とバトルを繰り広げる。',
  上司独裁:
    '理不尽な権力を持つ上司に逆らわず、かつ自分の利益を確保するために立ち回る社内政治をテーマにしたカードバトルゲーム。',
  'ブロックスシャッフル ポケモンエディション':
    '盤面にブロックを置く陣取りゲーム『ブロックス』にポケモンの「わざ」カードの効果が加わったバージョン。盤面をひっくり返す予測不能な逆転要素が増え、よりパーティー感が増している。',
  'CRUSH ICE GAME':
    '氷のブロックを順番にハンマーで叩き落とし、上に乗っているペンギンを落としてしまった人が負けとなる定番のアクションバランスゲーム。子供から大人まで直感的に楽しめる。',
  '#ポメマダ！':
    '犬のポメラニアンをモチーフにした誰も死なないやさしいマーダーミステリー。においを嗅いだりかみついたりする犬ならではのギミックがあり、短時間で手軽に推理とロールプレイを楽しめる。',
  エビフライエフェクト:
    '手札のカードを組み合わせて、日常の些細な行動がバタフライ・エフェクトのように世界の終焉（またはエビフライ）に繋がるピタゴラスイッチ的なルートを作る大喜利系ゲーム。',
  '居酒屋オブザデッド 2次会':
    'ゾンビが溢れる世界でなぜか居酒屋での飲み会を続けるというカオスなカードゲーム『居酒屋オブザデッド』の拡張セット・続編。',
  正気の沙汰じゃない犯行予告:
    'お題となる犯行予告に対し、手札の単語カードを組み合わせていかに狂気的（または爆笑できる）な犯行声明文を作るかを競う大喜利ゲーム。',
  金継ぎ編:
    'マーダーミステリーや謎解きに関する拡張シナリオ。プレイヤーは壊れた断片や隠された過去の真実の欠片を繋ぎあわせ、ひとつの結末へと導く。',
};

async function run() {
  console.log('--- ローカル生成データによる説明文の更新を開始 ---');

  for (const [name, description] of Object.entries(descriptions)) {
    // nameを使って一致するボードゲームを検索して更新
    const { data: gameInfo, error: findError } = await supabase
      .from('board_games')
      .select('id')
      .eq('name', name)
      .limit(1)
      .single();

    if (findError || !gameInfo) {
      console.log(`[未発見] ${name} がデータベースに見つかりませんでした`);
      continue;
    }

    const { error: updateError } = await supabase
      .from('board_games')
      .update({ description })
      .eq('id', gameInfo.id);

    if (updateError) {
      console.error(`[更新エラー] ${name}:`, updateError);
    } else {
      console.log(
        `[成功] ${name} の説明を更新しました (${description.length}文字)`,
      );
    }
  }

  console.log('--- 完了処理 ---');
}

run();
